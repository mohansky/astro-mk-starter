---
import type { HTMLAttributes } from "astro/types";
import { cn } from "@/lib/utils";

interface Props extends HTMLAttributes<"div"> {
  tip: string;
  position?: "top" | "bottom" | "left" | "right";
  color?: "primary" | "secondary" | "accent" | "info" | "success" | "warning" | "error";
  open?: boolean;
  class?: string;
}

const {
  tip,
  position = "top",
  color,
  open = false,
  class: className,
  ...rest
} = Astro.props;

const positions: Record<string, string> = {
  top: "tooltip tooltip-top",
  bottom: "tooltip tooltip-bottom",
  left: "tooltip tooltip-left",
  right: "tooltip tooltip-right",
};

const colors: Record<string, string> = {
  primary: "tooltip-primary",
  secondary: "tooltip-secondary",
  accent: "tooltip-accent",
  info: "tooltip-info",
  success: "tooltip-success",
  warning: "tooltip-warning",
  error: "tooltip-error",
};

const classes = cn(
  positions[position],
  color && colors[color],
  open && "tooltip-open",
  className
);
---

<div class={classes} data-tip={tip} {...rest}>
  <slot />
</div>